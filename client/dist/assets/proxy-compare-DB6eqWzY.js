const m=Symbol(),d=Symbol(),O="a",b="w";let v=(t,n)=>new Proxy(t,n);const R=Object.getPrototypeOf,D=new WeakMap,k=t=>t&&(D.has(t)?D.get(t):R(t)===Object.prototype||R(t)===Array.prototype),P=t=>typeof t=="object"&&t!==null,K=t=>{if(Array.isArray(t))return Array.from(t);const n=Object.getOwnPropertyDescriptors(t);return Object.values(n).forEach(u=>{u.configurable=!0}),Object.create(R(t),n)},S=t=>t[d]||t,A=(t,n,u,o)=>{if(!k(t))return t;let y=o&&o.get(t);if(!y){const s=S(t);y=(g=>Object.values(Object.getOwnPropertyDescriptors(g)).some(l=>!l.configurable&&!l.writable))(s)?[s,K(s)]:[s],o==null||o.set(t,y)}const[f,r]=y;let e=u&&u.get(f);return e&&e[1].f===!!r||(e=((s,g)=>{const l={f:g};let h=!1;const c=(a,i)=>{if(!h){let w=l[O].get(s);if(w||(w={},l[O].set(s,w)),a===b)w[b]=!0;else{let j=w[a];j||(j=new Set,w[a]=j),j.add(i)}}},p={get:(a,i)=>i===d?s:(c("k",i),A(Reflect.get(a,i),l[O],l.c,l.t)),has:(a,i)=>i===m?(h=!0,l[O].delete(s),!0):(c("h",i),Reflect.has(a,i)),getOwnPropertyDescriptor:(a,i)=>(c("o",i),Reflect.getOwnPropertyDescriptor(a,i)),ownKeys:a=>(c(b),Reflect.ownKeys(a))};return g&&(p.set=p.deleteProperty=()=>!1),[p,l]})(f,!!r),e[1].p=v(r||f,e[0]),u&&u.set(f,e)),e[1][O]=n,e[1].c=u,e[1].t=o,e[1].p},E=(t,n,u,o,y=Object.is)=>{if(y(t,n))return!1;if(!P(t)||!P(n))return!0;const f=u.get(S(t));if(!f)return!0;if(o){const e=o.get(t);if(e&&e.n===n)return e.g;o.set(t,{n,g:!1})}let r=null;try{for(const e of f.h||[])if(r=Reflect.has(t,e)!==Reflect.has(n,e),r)return r;if(f[b]===!0){if(r=((e,s)=>{const g=Reflect.ownKeys(e),l=Reflect.ownKeys(s);return g.length!==l.length||g.some((h,c)=>h!==l[c])})(t,n),r)return r}else for(const e of f.o||[])if(r=!!Reflect.getOwnPropertyDescriptor(t,e)!=!!Reflect.getOwnPropertyDescriptor(n,e),r)return r;for(const e of f.k||[])if(r=E(t[e],n[e],u,o,y),r)return r;return r===null&&(r=!0),r}finally{o&&o.set(t,{n,g:r})}},x=t=>k(t)&&t[d]||null,W=(t,n=!0)=>{D.set(t,n)},$=(t,n,u)=>{const o=[],y=new WeakSet,f=(r,e)=>{if(y.has(r))return;P(r)&&y.add(r);const s=P(r)&&n.get(S(r));if(s){var g,l;if((g=s.h)==null||g.forEach(c=>{const p=`:has(${String(c)})`;o.push(e?[...e,p]:[p])}),s[b]===!0){const c=":ownKeys";o.push(e?[...e,c]:[c])}else{var h;(h=s.o)==null||h.forEach(c=>{const p=`:hasOwn(${String(c)})`;o.push(e?[...e,p]:[p])})}(l=s.k)==null||l.forEach(c=>{!("value"in(Object.getOwnPropertyDescriptor(r,c)||{}))||f(r[c],e?[...e,c]:[c])})}else e&&o.push(e)};return f(t),o};export{A as a,W as h,E as p,$ as w,x as y};
